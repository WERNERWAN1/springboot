package com.werner.controller;import com.alibaba.fastjson.JSONObject;import com.werner.common.controller.BaseController;import com.werner.common.util.Constant;import com.werner.common.util.RedisUtil;import com.werner.common.util.RequestData;import com.werner.common.util.ResponseData;import com.werner.entity.User;import com.werner.service.UserService;import com.werner.vo.LoginVO;import com.werner.vo.UserVO;import lombok.extern.slf4j.Slf4j;import org.springframework.web.bind.annotation.*;import javax.annotation.Resource;import java.util.UUID;@Slf4j@RestController@RequestMapping("/unNeedLogin/user/")public class UserController extends BaseController {    @Resource    private UserService userService;    @Resource    private RedisUtil redisUtil;    @PostMapping("login")    public ResponseData<LoginVO> getLogin(@RequestBody RequestData<UserVO> parma) {        User user = new User();        user.setName(parma.getData().getName());        user.setMobile(parma.getData().getPhone());        Boolean result = userService.getUserByLogin(user);        LoginVO loginVO = new LoginVO();        if (result) {            Boolean resultRedis = redisUtil.set(Constant.userToken + parma.getData().getPhone(), JSONObject.toJSONString(user), Constant.usuallyTime * 60 * 24);            loginVO.setToken(Constant.userToken + UUID.randomUUID());        }        return result ? ResponseData.successful(loginVO) : ResponseData.fail(loginVO);    }    @GetMapping("hello")    public ResponseData hello() {//        try {            log.info("hello world");            int[] aa = {1, 2, 3, 4};            log.info(aa[8] + "");            log.info("test aop ");            return ResponseData.successful(null);//        } catch (Exception e) {//            log.info("异常：" + e);//            return ResponseData.fail(null);//        }    }}